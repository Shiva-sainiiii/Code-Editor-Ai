<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Shiva Code Editor — AI Integrated (Fixed)</title>
  
<link rel="stylesheet" href="css/style.css">
</head>

<body>
 <!-- TOP BUTTONS -->
 <div class="top-buttons" role="toolbar" aria-label="editor actions">
   <button onclick="runPreview()">Preview</button>
   <button onclick="openFile()">Open</button>
   <button onclick="clearEditor()">Clear</button>
   <button onclick="saveFile()">Save</button>
 <button onclick="copyCode()">Copy</button>

 </div>

<!-- EDITOR -->
<div class="editor-wrapper">
 
 <!-- Line Numbers -->
 <div id="lineNumbers" class="line-numbers">1</div>

 <!-- Code Area -->
 <div id="codeArea" 
      class="code-area" 
      contenteditable="true" 
      spellcheck="false" 
      aria-label="code editor">

 </div>
      <div id="suggestBox" class="suggest-box"></div>
</div>

 <!-- BOTTOM BUTTONS -->
 <div class="bottom-buttons" role="toolbar" aria-label="editor controls">
   <button onclick="fontPlus()">Zoom +</button>
   <button onclick="fontMinus()">Zoom -</button>
   <button onclick="toggleWrap()">Wrap</button>
 <button onclick="undo()">Undo</button>
 <button onclick="redo()">Redo</button>
 </div>

 <!-- AI FLOAT BUTTON -->
 <button class="ai-button" aria-label="open AI panel" onclick="openAIPanel()">AI ⚡</button>

 <!-- AI PANEL (restructured) -->
 <div id="aiPanel" class="ai-panel" aria-hidden="true" role="dialog" aria-label="AI Assistant Panel">
   <!-- Fixed header -->
   <div class="ai-header" role="tablist" aria-label="AI tabs and controls">
     <div class="left">
       <div id="dragHandle" class="drag-handle" aria-hidden="true" title="Drag to move"></div>
       <div class="ai-tabs" role="tablist" aria-label="AI tabs">
         <button id="tabAnalyze" class="tab active" role="tab" aria-selected="true" onclick="showAnalyze()">Analyze</button>
         <button id="tabConvert" class="tab" role="tab" aria-selected="false" onclick="showConvert()">Text → Code</button>
       </div>
     </div>
     <div class="ai-controls">
       <button class="ai-clear" onclick="clearAiChat()" aria-label="clear chat">Clear Chat</button>
       <button style="background-color:rgba(100,0,0,0.5);" class="ai-close" onclick="closeAIPanel()" aria-label="close panel">×</button>
     </div>
   </div>



   <!-- scrollable content wrapper (pages live here) -->
   <div class="ai-content-wrapper" role="document">
     
     <!-- Analyze Page -->
     <div id="pageAnalyze" class="ai-page">
     <!-- action row fixed under header (for quick actions) -->
     <div class="ai-action-row" aria-hidden="false">
     <button class="action" onclick="analyzeCode()">Analyze Code</button>
     <button class="action secondary" onclick="copyAIOutput()">Copy Output</button>
     </div>
     <div id="aiOutput" class="ai-output" aria-live="polite"></div>
     <!-- fixed input area at bottom -->
     <div class="ai-input-area" role="search">
     <input id="aiInput" type="text" placeholder="Ask AI…" aria-label="Ask AI" />
     <button onclick="sendAI()">Send</button>
     </div>
     </div>

     <!-- Convert Page -->
     <div id="pageConvert" class="ai-page" style="display:none;">
       <div class="convert-area">
       <div class="convert-controls">
         <button onclick="convertTextToCode(false)">Convert → Insert</button>
         <button onclick="convertTextToCode(true)" class="preview-btn">Preview Only</button>
       </div>
         <textarea id="convertPrompt" placeholder="eg. :- write html boiler plate code"></textarea>

       </div>

     </div>
     
   </div>


 </div>
<textarea id="pasteHelper"
 style="
   position:fixed;
   left:-9999px;
   top:-9999px;
   opacity:0;
 ">
</textarea>

  <!-- JS FILES (ORDER MATTERS) -->
  <script src="js/editor.js"></script>
  <script src="js/ai-ui.js"></script>
  <script src="js/main.js"></script>

</body>
   </html>
  
